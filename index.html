<!DOCTYPE html>         
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick-theme.min.css"
            integrity="sha512-17EgCFERpgZKcm0j0fEq1YCJuyAWdz9KUtv1EjVuaOz8pDnh/0nZxmU6BBXwaaxqoi9PQXnRWqlcDB027hgv9A=="crossorigin="anonymous"
            />
        <link rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.css"
            integrity="sha512-yHknP1/AwR+yx26cB1y0cjvQUMvEa2PFzt1c9LlS4pRQ5NOTZFWbhBig+X9G9eYW/8m0/4OXNx8pxJ6z57x0dw=="crossorigin="anonymous"
            />
        <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

        <link href="index.css" rel="stylesheet">
        <title>Document</title>
        <style>
            /* Center the loader */
            #loader {
                position: absolute;
                left: 50%;
                top: 50%;
                z-index: 1;
                width: 150px;
                height: 150px;
                margin: -75px 0 0 -75px;
                border: 6px solid transparent;
                border-radius: 50%;
                border-top: 10px solid #3498db;
                width: 130px;
                height: 130px;
                -webkit-animation: spin 2s linear infinite;
                animation: spin 1.5s linear infinite;
            }
            
            @-webkit-keyframes spin {
                0% { -webkit-transform: rotate(0deg); }
                100% { -webkit-transform: rotate(360deg); }
            }
            
            @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }
            
            /* Add animation to "page content" */
            .animate-bottom {
                position: relative;
                -webkit-animation-name: animatebottom;
                -webkit-animation-duration: 1s;
                animation-name: animatebottom;
                animation-duration: 1s
            }
            
            @-webkit-keyframes animatebottom {
                from { bottom:-100px; opacity:0 } 
                to { bottom:0px; opacity:1 }
            }
            
            @keyframes animatebottom { 
                from{ bottom:-100px; opacity:0 } 
                to{ bottom:0; opacity:1 }
            }
            
            </style>
    </head>
    <body>
        <div id="loader"></div>
        <div class="wrapper">
            <div class="header">
                <svg class="svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" width="524px" height="222.5px" viewBox="0 0 1024 352.5" enable-background="new 0 0 1024 352.5" xml:space="preserve">
                    <g>
                        <path fill="#fff" d="M851.325,73.836l-20.162,31.206l-16.731-26.604l-42.081,5.187l34.133,51.869L767.582,192.3L738.385,88.059   l-38.567,4.769l-61.992,117.961l15.896-112.522l-42.751,5.271L580.1,148.88l-18.991-39.153l-38.399,4.686l-16.983,120.22   l38.065-4.686l8.366-59.565l20.747,39.487l0.67-0.084l32.795-46.097l-8.366,59.566l35.556-4.351l3.179-0.418l39.236-4.853   l8.199-16.899l40.742-5.02l3.932,15.394l31.122-3.849l10.29-1.255l34.803-4.267l23.676-36.309l18.238,31.205l42.081-5.187   l-35.891-56.136l43.252-62.997L851.325,73.836z M698.144,166.866l14.641-30.452l6.609,27.859L698.144,166.866z"/>
                        <polygon fill="transparent" points="360.659,133.988 352.544,191.379 319.247,139.092 282.855,143.525 265.872,263.829    304.439,259.061 312.973,199.243 347.691,253.706 382.243,249.439 399.227,129.22  "/>
                        <path fill="transparent" d="M147.326,234.381l4.35-30.453c1.255-9.704,9.454-12.298,18.071-13.302l45.678-5.605l4.769-33.715   l-80.313,9.872c-11.21,1.339-19.911,8.533-22.505,18.991l-11.628,82.572c-1.088,10.708,9.872,19.576,24.429,17.819c0,0,0,0,0.083,0   l72.533-8.867l5.02-33.632l-49.275,6.023C152.01,244.922,146.154,242.83,147.326,234.381z"/>
                        <polygon fill="transparent" points="231.99,149.884 215.006,270.02 253.909,265.251 270.892,145.115  "/>
                        <polygon fill="transparent" points="496.021,190.459 500.037,161.429 443.147,168.289 444.821,156.074 505.81,148.545 510.494,115.583    411.273,127.798 394.29,248.017 493.595,235.887 498.196,202.924 437.208,210.453 439.132,197.402  "/>
                        <path stroke="#fff" stroke-width="1.3" fill="transparent" d="M35.723,123.112L4.267,346.819L954.98,230.113L986.437,6.407L35.723,123.112z M202.792,271.692l-72.533,8.868   c-0.083,0-0.083,0-0.083,0c-14.557,1.757-25.517-7.111-24.429-17.819l11.628-82.572c2.594-10.458,11.294-17.652,22.505-18.991   l80.313-9.872l-4.769,33.715l-45.678,5.605c-8.617,1.004-16.816,3.598-18.071,13.302l-4.351,30.452   c-1.171,8.45,4.685,10.542,11.211,9.705l49.275-6.023L202.792,271.692z M215.006,270.02l16.983-120.136l38.902-4.769   l-16.983,120.136L215.006,270.02z M347.691,253.706l-34.719-54.463l-8.533,59.817l-38.567,4.769l16.983-120.304l36.392-4.434   l33.297,52.287l8.115-57.391l38.568-4.769l-16.983,120.22L347.691,253.706z M498.196,202.924l-4.602,32.963l-99.305,12.13   l16.983-120.219l99.221-12.215l-4.685,32.962l-60.988,7.529l-1.674,12.215l56.89-6.86l-4.017,29.03l-56.889,6.943l-1.924,13.051   L498.196,202.924z M889.057,187.447l-42.081,5.187l-18.238-31.205l-23.676,36.309l-34.803,4.267l-10.29,1.255l-31.122,3.849   l-3.932-15.394l-40.742,5.02l-8.199,16.899l-39.236,4.853l-3.179,0.418l-35.556,4.351l8.366-59.566l-32.795,46.097l-0.67,0.084   l-20.747-39.487l-8.366,59.565l-38.065,4.685l16.983-120.219l38.399-4.686L580.1,148.88l30.87-45.344l42.751-5.271l-15.896,112.522   l61.992-117.961l38.567-4.769l29.197,104.24l38.901-56.805l-34.133-51.869l42.081-5.187l16.731,26.604l20.162-31.206l45.093-5.521   l-43.252,62.997L889.057,187.447z"/>
                        <polygon fill="transparent" points="698.144,166.866 719.394,164.273 712.784,136.414  "/>
                    </g>
                    <g>
                        <path d="M1019.649,15.107c0.502,4.267-0.585,8.533-3.179,11.879c-2.594,3.263-6.107,5.438-10.374,5.94   c-7.613,0.92-13.218-3.932-14.055-10.792c-0.502-4.267,0.585-8.533,3.263-11.88c2.51-3.263,6.023-5.438,10.374-5.94   C1013.208,3.311,1018.813,8.247,1019.649,15.107z M1015.049,26.234c2.51-3.179,3.514-6.944,3.012-10.792   c-0.754-6.023-5.354-10.458-12.382-9.621c-3.765,0.502-6.944,2.51-8.952,5.104c-2.51,3.179-3.514,6.944-3.012,10.792   c0.753,6.107,5.354,10.541,12.466,9.621C1009.861,30.919,1013.041,28.828,1015.049,26.234z M1003.085,26.15l-4.602,0.585   l2.176-15.394l5.939-0.753c4.435-0.585,6.442,1.255,6.776,3.932c0.335,2.677-1.088,4.602-3.681,5.772l2.677,4.685l-4.769,0.586   l-2.343-4.1l-1.673,0.251L1003.085,26.15z M1006.348,17.868c1.255-0.167,1.924-0.586,2.259-1.004   c0.251-0.335,0.419-0.753,0.335-1.171c-0.168-1.087-0.92-1.255-2.092-1.171l-2.092,0.251l-0.502,3.347L1006.348,17.868z" fill="#fff"/>
                    </g>
                </svg>
                <form action="">
                    <input type="text" class="input" placeholder="Search here">
                </form>
            </div>
            <div class="searchResults">
                <h2 class="heading"> Results</h2>
                <div class="searchedMovies"></div>
            </div>
            <br>
            <div class="discover section" data-lzscroll-section="popular">
                <img src="images/white_search.svg"> <h2 class="heading"> DISCOVER</h2>
                <div class="discover__movies sectionmovie movieClass">                
                </div>
                <button class="more">View More</button>
            </div>
            
            <div class="trending section" data-lzscroll-section="now_playing" >
                <img src="images/white_trending.svg"> <h2 class="heading"> TRENDING</h2>
                <div class="trending__movies sectionmovie movieClass">
                </div>
                <button class="more">View More</button>
            </div>
            
            <div class="top__rated section" data-lzscroll-section="top_rated">
                <img src="images/white_trending.svg"> <h2 class="heading"> TOP RATED</h2>
                <div class="toprated__movies sectionmovie movieClass">
                </div>
                <button class="more">View More</button>
            </div>
            
            <div class="upcoming section" data-lzscroll-section="upcoming">
                <img src="images/white_trending.svg"> <h2 class="heading"> UP COMING</h2>
                <div class="upcoming__movies sectionmovie movieClass">
                </div>
                <button class="more">View More</button>
            </div>
        </div>
        
        <div class="video__player" data-tag = 'modal'>
            <iframe style="border:0" width="100%" height="80%" allow="autoplay" data-tag = 'iframe' allowfullscreen>
            </iframe>
            <button class="close__player" data-tag = 'closemodal'>X</button>
            <div class = 'movie__details movie__details--videoplayer'>
                                <p class="movie__name"></p>
                                <p class='movie__viewcount'></p>
                                <span class='movie__genres'></span>
                                <span class='movie__genres'></span>
                                <span class='movie__genres'></span>
                                <p class="movie__info"></p>
            </div>
        </div>

        <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mustache.js/4.0.1/mustache.js"></script>
        <script src="https://kit.fontawesome.com/a076d05399.js"></script>
        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"
            integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg=="crossorigin="anonymous"></script>
        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.js"></script>
        <script src="lazyload.js"></script>
        <script src="js/script.js"></script>
        <script src="pagination.js"></script>
        <script src="buttonlistener.js"></script>
        <script src="modal.js"></script>
        <script id="template" type="x-tmpl-mustache">
            <div class ="movie" data-id = "{{movie.id}}" data-target = 'modal' >
                <div class="movie__wrapper">
                   <div class = "movie__image" style="padding-top:153%;background-image: url('https://image.tmdb.org/t/p/w200{{movie.poster_path}}'), url('images/Default.png');" >
                        <i class = "visibilityhidden fas fa-play-circle" aria - hidden = "true" ></i>  
                    </div>
                      <div class = 'movie__details'>
                          <p class="movie__name">{{movie.original_title}}</p>
                          <p class='movie__viewcount'>{{movie.vote_count}} voting</p>
                          <span class='movie__genres'>{this.genres}</span>
                          <span class='movie__genres'>{this.genres}</span>
                          <span class='movie__genres'>{this.genres}</span>
                          <p class="movie__info">{{movie.overview}}</p>
                      </div>
                  </div>
              </div>
          </script>

        <script> 
            let leftButton , rightButton , movie;
            initialPageload();
            
            function initialPageload() {                      //slick on page load
                movies.init();

                //lazy load
                scrollLoad.init({
                    element: '.movieClass',
                    onReach(element, config) {

                        movies.c = movies.c + 1;
                        element.classList.remove('lazy');

                        $(element).parent().addClass('loaded')
                        let key =  element.parentNode.dataset.lzscrollSection ;
                        movies.displayHomepage(movies.getlink(key), element, false).then((resp) => {

                            addSlick(element.classList[0],element);
                            modal.init($(element).find("[data-target~='modal']"))

                        });

                        $('#loader').css("display" , "none")
                    }
                })          
            }       

            function addSlick (classname , element) {                         //addSlick('movieClass');
                console.log(classname)
                $(`.${classname}`).slick({                        // make slick properties
                    infinite: true,
                    slidesToShow: 6.0,
                    slidesToScroll: 5.0,
                    centerPadding: '0px',
                    autoplay : false,
                    speed: 400,
                    responsive: [
                        {
                            breakpoint: 1410,
                            settings: {
                                infinite: true,
                                slidesToShow: 5.0,
                                slidesToScroll: 3,
                                centerMode: false,
                                autoplay : false,
                                speed: 400,
                            }
                        },
                        {                                               
                            breakpoint: 983,
                            settings: {
                                infinite: true,
                                slidesToShow: 3.0,
                                slidesToScroll: 3.0,
                                autoplay : false,
                                speed: 400,
                            }
                        },{                                               
                            breakpoint: 610,
                            settings: {
                                infinite: true,
                                slidesToShow: 2.0,
                                slidesToScroll: 2.0,
                                autoplay : false,
                                speed: 400,
                            }
                        }
                    ]   
                }).on({breakpoint: function(){
                    $(".slick-prev").html('<i class="fas fa-chevron-left" style="font-size:29px;"></i>');  //slick button maker
                    $(".slick-next").html('<i class="fas fa-chevron-right" style="font-size:29px;"></i>');  //slick button maker
                                        console.log('htSlide');
                    
                    $(element).find('.last-active').removeClass('last-active')
                    $(element).find('.slick-active').last().addClass('last-active')

                }}
                
                );
               $(`.${classname}`).on('afterChange', function(event, slick, currentSlide, nextSlide){
                    $(element).find('.slick-active').last().addClass('last-active')
                });
                
                $(element).find('.slick-active').last().addClass('last-active')
                $(".slick-prev").html('<i class="fas fa-chevron-left" style="font-size:29px;"></i>');  //slick button maker
                $(".slick-next").html('<i class="fas fa-chevron-right" style="font-size:29px;"></i>');  //slick button maker                              
             
            }
        
            buttonlistener.init({
                element: ".more",
                onReach(element, config) {

                }
            })
            
        </script>
    </body>
</html> 